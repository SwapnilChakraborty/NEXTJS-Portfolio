{"version":3,"file":"wrapMiddlewareWithSentry.js","sources":["../../../src/common/wrapMiddlewareWithSentry.ts"],"sourcesContent":["import type { EdgeRouteHandler } from '../edge/types';\nimport { withEdgeWrapping } from './utils/edgeWrapperUtils';\n\n/**\n * Wraps Next.js middleware with Sentry error and performance instrumentation.\n *\n * @param middleware The middleware handler.\n * @returns a wrapped middleware handler.\n */\nexport function wrapMiddlewareWithSentry<H extends EdgeRouteHandler>(\n  middleware: H,\n): (...params: Parameters<H>) => Promise<ReturnType<H>> {\n  return new Proxy(middleware, {\n    apply: (wrappingTarget, thisArg, args: Parameters<H>) => {\n      return withEdgeWrapping(wrappingTarget, {\n        spanDescription: 'middleware',\n        spanOp: 'middleware.nextjs',\n        mechanismFunctionName: 'withSentryMiddleware',\n      }).apply(thisArg, args);\n    },\n  });\n}\n"],"names":[],"mappings":";;AAGA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,wBAAwB;AACxC,EAAE,UAAU;AACZ,EAAwD;AACxD,EAAE,OAAO,IAAI,KAAK,CAAC,UAAU,EAAE;AAC/B,IAAI,KAAK,EAAE,CAAC,cAAc,EAAE,OAAO,EAAE,IAAI,KAAoB;AAC7D,MAAM,OAAO,gBAAgB,CAAC,cAAc,EAAE;AAC9C,QAAQ,eAAe,EAAE,YAAY;AACrC,QAAQ,MAAM,EAAE,mBAAmB;AACnC,QAAQ,qBAAqB,EAAE,sBAAsB;AACrD,OAAO,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;AAC7B,KAAK;AACL,GAAG,CAAC,CAAA;AACJ;;;;"}